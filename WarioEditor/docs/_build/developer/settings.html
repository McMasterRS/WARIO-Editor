

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Custom Settings &mdash; WARIO 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Custom Global Inputs" href="globals.html" />
    <link rel="prev" title="Custom Nodes" href="nodes.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> WARIO
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">WARIO Editor</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/userGuide.html">Using The WARIO Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/toolkits.html">Toolkits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/globals.html">Global Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/pipeline.html">Running The Pipeline</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="nodes.html">Custom Nodes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Custom Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#building-a-basic-custom-settings-window">Building A Basic Custom Settings Window</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#initialization">1 - Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constructing-the-settings-ui">2 - Constructing The Settings UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-the-settings-output">3 - Generating The Settings Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#handling-loading">4 - Handling Loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#finished-settings-window">Finished Settings Window</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#optional-functions">Optional Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#updateglobals">updateGlobals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getattribs">getAttribs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#eventfilter">eventFilter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#custom-widgets">Custom Widgets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#savewidget-loadwidget">saveWidget/loadWidget</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uniquenametable">UniqueNameTable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linkedcheckbox">LinkedCheckbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linkedspinbox-linkeddoublespinbox">LinkedSpinbox/LinkedDoubleSpinbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expandingtable">ExpandingTable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#centredcellcheckbox">CentredCellCheckbox</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="globals.html">Custom Global Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="toolkits.html">Building Toolkits</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">WARIO</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Custom Settings</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/developer/settings.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="custom-settings">
<h1>Custom Settings<a class="headerlink" href="#custom-settings" title="Permalink to this headline">¶</a></h1>
<p>Custom settings are built off of the <code class="docutils literal notranslate"><span class="pre">CustomSettings</span></code> class in <code class="docutils literal notranslate"><span class="pre">extensions.customSettings</span></code>. They create an interface between the user and the code while avoiding the need for direct coding experience.</p>
<div class="section" id="building-a-basic-custom-settings-window">
<h2>Building A Basic Custom Settings Window<a class="headerlink" href="#building-a-basic-custom-settings-window" title="Permalink to this headline">¶</a></h2>
<p>Below is a step by step guide on how to create a new custom node.</p>
<div class="section" id="initialization">
<h3>1 - Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h3>
<p>The node must be created and the parent class initialized to make sure that the rest of the class has access to the parent and settings variables. Unlike with the custom nodes, the settings class can be named anything the user wishes, although the format of “NodeClassNameSettings” is used by the WARIO development team for consistancy.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">extensions.customSettings</span> <span class="kn">import</span> <span class="n">CustomSettings</span>

<span class="k">class</span> <span class="nc">ExampleNodeSettings</span><span class="p">(</span><span class="n">CustomSettings</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ExampleNodeSettings</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="constructing-the-settings-ui">
<h3>2 - Constructing The Settings UI<a class="headerlink" href="#constructing-the-settings-ui" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">buildUI</span></code> function is called as a part of the initialization of the <code class="docutils literal notranslate"><span class="pre">CustomSettings</span></code> class. As the  parent class itself inherets from the PyQt5 <code class="docutils literal notranslate"><span class="pre">QWidget</span></code> class, we can use widgets included in PyQt5 to build our interface.</p>
<p>The first required component is the layout object</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">buildUI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example we’re using the <code class="docutils literal notranslate"><span class="pre">QVBoxLayout</span></code> object which creates a vertical arrangement of widgets but other layout types can be found at the <a class="reference external" href="https://doc.qt.io/qt-5/qhboxlayout.html">Qt documentation site</a>. While this documentation is given in C++, the function calls are effectively identical.</p>
<p>Widgets can be added to this layout to give the required settings interface. In this example we’re adding a single checkbox that enables or disables a graphical output</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>        <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;Show Graph&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="p">)</span>
</pre></div>
</div>
<p>Combined, this gives</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">buildUI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;Show Graph&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>      
</pre></div>
</div>
<p>Alternatively, it is possible to import .ui files created in software like QT-Designer. To import a .ui file use the following code</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>	<span class="n">uic</span><span class="o">.</span><span class="n">loadUi</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span><span class="s2">&quot;uiFileRelativeToNodeFile.ui&quot;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<p>The os.path commands generate a path to the ui file relative to the node’s .py file, allowing you to create settings UIs for custom toolkits. This command assigns all widgets to be children of <code class="docutils literal notranslate"><span class="pre">self</span></code> and thus you can access them by referencing the names set in the designer, e.g.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">labelWidget</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;text to set&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="generating-the-settings-output">
<h3>3 - Generating The Settings Output<a class="headerlink" href="#generating-the-settings-output" title="Permalink to this headline">¶</a></h3>
<p>The final required function is <code class="docutils literal notranslate"><span class="pre">genSettings</span></code>. This is called when the settings window is closed, loses focus, or the WARIO editor saves a file. This function generates two dicts, one for the properties of the settings widgets and the other for the values of the variables used by the code.</p>
<p>First, we need to store the “settingsFile” and “settingsClass” values. These are used to locate the file and class that defines the node’s settings UI when loading a WARIO pipeline.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">genSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">vars</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsFile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsFile&quot;</span><span class="p">]</span>
        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsClass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsClass&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>With those values saved, the current state of all the window’s widgets must be gathered. These values can be given any key but it is recommended to use consistant, easy to understand names.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;showGraphToggleState&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="o">.</span><span class="n">getChecked</span><span class="p">()</span>
</pre></div>
</div>
<p>Likewise, the values given by relevant widgets must be stored. The keys of these values must match those used by the node’s code.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>        <span class="nb">vars</span><span class="p">[</span><span class="s2">&quot;showGraph&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="o">.</span><span class="n">getChecked</span><span class="p">()</span>
</pre></div>
</div>
<p>Finally, the node that the settings window is attached to must be passed the settings and variable values</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="nb">vars</span>
</pre></div>
</div>
<p>This gives the full <code class="docutils literal notranslate"><span class="pre">genSettings</span></code> function as shown below</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">genSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">vars</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsFile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsFile&quot;</span><span class="p">]</span>
        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsClass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsClass&quot;</span><span class="p">]</span>
        
        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;showGraphToggleState&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="o">.</span><span class="n">getChecked</span><span class="p">()</span>
        <span class="nb">vars</span><span class="p">[</span><span class="s2">&quot;showGraph&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="o">.</span><span class="n">getChecked</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="nb">vars</span>
</pre></div>
</div>
</div>
<div class="section" id="handling-loading">
<h3>4 - Handling Loading<a class="headerlink" href="#handling-loading" title="Permalink to this headline">¶</a></h3>
<p>Now that there is a system in place for saving the state of the settings window, code must be added to <code class="docutils literal notranslate"><span class="pre">buildUI</span></code> to make sure that the widgets are properly updated upon loading a pipeline. As the function must be able to handle both new and loaded settings windows, we must check if to see if each key exists before applying</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">buildUI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;Show Graph&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;showGraphToggleState&quot;</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;showGraphToggleState&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span>              
</pre></div>
</div>
</div>
<div class="section" id="finished-settings-window">
<h3>Finished Settings Window<a class="headerlink" href="#finished-settings-window" title="Permalink to this headline">¶</a></h3>
<p>The above tutorial gives the following settings window:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">extensions.customSettings</span> <span class="kn">import</span> <span class="n">CustomSettings</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtWidgets</span>

<span class="k">class</span> <span class="nc">ExampleNodeSettings</span><span class="p">(</span><span class="n">CustomSettings</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ExampleNodeSettings</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">buildUI</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QCheckBox</span><span class="p">(</span><span class="s2">&quot;Show Graph&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;showGraphToggleState&quot;</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;showGraphToggleState&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="p">)</span> 

    <span class="k">def</span> <span class="nf">genSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="nb">vars</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsFile&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsFile&quot;</span><span class="p">]</span>
        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsClass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">[</span><span class="s2">&quot;settingsClass&quot;</span><span class="p">]</span>
        
        <span class="n">settings</span><span class="p">[</span><span class="s2">&quot;showGraphToggleState&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="o">.</span><span class="n">getChecked</span><span class="p">()</span>
        <span class="nb">vars</span><span class="p">[</span><span class="s2">&quot;showGraph&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showGraph</span><span class="o">.</span><span class="n">getChecked</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="nb">vars</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="optional-functions">
<h2>Optional Functions<a class="headerlink" href="#optional-functions" title="Permalink to this headline">¶</a></h2>
<p>There are several additional functions included in the CustomSettings class that can be overloaded.</p>
<div class="section" id="updateglobals">
<h3>updateGlobals<a class="headerlink" href="#updateglobals" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">updateGlobals</span></code> function is used for widgets that require access to the global variable values. This could be used for such things as global file naming or changing widget properties. The base version of this function is defined as follows, with “globals” containing the dict of global variables in the same manner as used in the code (see <a class="reference internal" href="nodes.html"><span class="doc">Custom Nodes</span></a>)</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">updateGlobals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">globals</span><span class="p">):</span>
        <span class="k">return</span>
</pre></div>
</div>
</div>
<div class="section" id="getattribs">
<h3>getAttribs<a class="headerlink" href="#getattribs" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">getAttribs</span></code> function is used exclusively when defining the attributes for nodes to be used by the “Custom Node” pipeline node. See <a class="reference internal" href="nodes.html"><span class="doc">Custom Nodes</span></a> for more information.</p>
</div>
<div class="section" id="eventfilter">
<h3>eventFilter<a class="headerlink" href="#eventfilter" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">eventFilter</span></code> function is an overload of the built in PyQt5 version of the function that runs the <code class="docutils literal notranslate"><span class="pre">genSettings</span></code> function when the settings window is either closed or loses focus. This allows for the settings window to directly affect the node’s properties such as its name or attributes.</p>
<p>The default version of this functionis as follows</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>
    <span class="k">def</span> <span class="nf">eventFilter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QEvent</span><span class="o">.</span><span class="n">Close</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">genSettings</span><span class="p">()</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QEvent</span><span class="o">.</span><span class="n">WindowDeactivate</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">genSettings</span><span class="p">()</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
            
        <span class="k">return</span> <span class="kc">False</span>     
</pre></div>
</div>
</div>
</div>
<div class="section" id="custom-widgets">
<h2>Custom Widgets<a class="headerlink" href="#custom-widgets" title="Permalink to this headline">¶</a></h2>
<p>Sometimes, its easier to create an overloaded PyQt widget class that can be reused for multiple nodes. Several of these have been developed for WARIO and can be found in the <code class="docutils literal notranslate"><span class="pre">extensions.customWidgets</span></code> file in the WARIO directory. Below are some of the more widely useful ones.</p>
<div class="section" id="savewidget-loadwidget">
<h3>saveWidget/loadWidget<a class="headerlink" href="#savewidget-loadwidget" title="Permalink to this headline">¶</a></h3>
<p>Shows a textbox with a button that opens a dialog allowing save/load locations to be set respectively. Can be passed a string that sets the dialog filter.</p>
<p>Must be passed the parent widget.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="n">textSave</span> <span class="o">=</span> <span class="n">saveWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Text files (*.txt)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="uniquenametable">
<h3>UniqueNameTable<a class="headerlink" href="#uniquenametable" title="Permalink to this headline">¶</a></h3>
<p>A QTableWidget that forces unique values in the first column. Any attempt to use a value that already exists causes the cell to revert to its previous value. It includes the <code class="docutils literal notranslate"><span class="pre">changedTextHook</span></code> function that can be overloaded to perform tasks when the user changes the text in any cell of the first column</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="k">def</span> <span class="nf">changedTextHook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
        <span class="k">return</span>
</pre></div>
</div>
<p>Must be initialized with string containing the error text for when the user attempts to enter an existing name</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="n">uniqueTable</span> <span class="o">=</span> <span class="n">UniqueNameTable</span><span class="p">(</span><span class="s2">&quot;Cannot have identical keys&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="linkedcheckbox">
<h3>LinkedCheckbox<a class="headerlink" href="#linkedcheckbox" title="Permalink to this headline">¶</a></h3>
<p>A checkbox that can be linked to another widget to enable or disable it depending on the state of the checkbox. Includes the functions <code class="docutils literal notranslate"><span class="pre">buildLinkedCheckbox</span></code> and <code class="docutils literal notranslate"><span class="pre">getSettings</span></code>. The former loads the state of the checkbox and the latter generates the settings and variables for the widget. If the linked widget is either a QComboBox or QSpinBox, they also handle setup and saving for the widget.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># In self.buildUI</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">enableWidget</span> <span class="o">=</span> <span class="n">LinkedCheckbox</span><span class="p">(</span><span class="s2">&quot;Enable Widget&quot;</span><span class="p">,</span> <span class="n">existingWidget</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">enableWidget</span><span class="o">.</span><span class="n">buildLinkedCheckbox</span><span class="p">(</span><span class="s2">&quot;enableWidget&quot;</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
    
    <span class="c1"># In self.genSettings</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">enableWidget</span><span class="o">.</span><span class="n">getSettings</span><span class="p">(</span><span class="s2">&quot;enableWidget&quot;</span><span class="p">,</span> <span class="nb">vars</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
</pre></div>
</div>
<p>If a spinbox or combobox, the variable name of the setting is given by the name passed to the getSettings function and its value is set to “None” if the checkbox is left unchecked.</p>
</div>
<div class="section" id="linkedspinbox-linkeddoublespinbox">
<h3>LinkedSpinbox/LinkedDoubleSpinbox<a class="headerlink" href="#linkedspinbox-linkeddoublespinbox" title="Permalink to this headline">¶</a></h3>
<p>These widgets allow you two create 2 spinboxes of either int or double type that are linked together so as to limit the range of each. The <code class="docutils literal notranslate"><span class="pre">linkWidgets</span></code> function is used to set the linked widget and how they act relative to the widget calling the function</p>
<p>The LinkedSpinbox widget will force the spinbox values to be no closer than 1 from each other and the LinkedDoubleSpinbox no closer than 0.01</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="bp">self</span><span class="o">.</span><span class="n">maxValue</span> <span class="o">=</span> <span class="n">LinkedSpinbox</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">minValue</span> <span class="o">=</span> <span class="n">LinkedSpinbox</span><span class="p">()</span>
    
    <span class="c1"># We want the min value to always be lower than the max value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">maxValue</span><span class="o">.</span><span class="n">linkWidgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">minValue</span><span class="p">,</span> <span class="s2">&quot;Lower&quot;</span><span class="p">)</span>
    <span class="c1"># And the max value to always be higher than the min value</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">minValue</span><span class="o">.</span><span class="n">linkWidgets</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxValue</span><span class="p">,</span> <span class="s2">&quot;Higher&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="expandingtable">
<h3>ExpandingTable<a class="headerlink" href="#expandingtable" title="Permalink to this headline">¶</a></h3>
<p>This creates a 1 column table that automatically expands when a value is inserted into the final row. It also shrinks whenever the final row is emptied. As with the LinkedCheckbox widget, this widget has a <code class="docutils literal notranslate"><span class="pre">getSettings</span></code> function that allows for the values stored in the table to be extracted with a single line. The key for these variables is the name passed to the init and getSettings functions (which must be identical)</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># In self.buildUI</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table</span> <span class="o">=</span> <span class="n">ExpandingTable</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
    
    <span class="c1"># in self.genSettings</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">getSettings</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="nb">vars</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="centredcellcheckbox">
<h3>CentredCellCheckbox<a class="headerlink" href="#centredcellcheckbox" title="Permalink to this headline">¶</a></h3>
<p>A widget that mimics a checkbox that can be used in QTableWidgets. This creates a centred checkbox that looks more tidy than the default left-aligned one when a cell is simply set as checkable. The functions <code class="docutils literal notranslate"><span class="pre">setChecked</span></code> and <code class="docutils literal notranslate"><span class="pre">isChecked</span></code> work in the same way as with a regular QCheckBox widget, and the <code class="docutils literal notranslate"><span class="pre">connect</span></code> function acts in the same way as the <code class="docutils literal notranslate"><span class="pre">checkbox.toggled.connect</span></code> call would.</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span>    <span class="n">checkbox</span> <span class="o">=</span> <span class="n">CentredCellCheckbox</span><span class="p">()</span>
    <span class="n">table</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">checkbox</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="globals.html" class="btn btn-neutral float-right" title="Custom Global Inputs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nodes.html" class="btn btn-neutral float-left" title="Custom Nodes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, McMaster University

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>